sfx:
  realm: us1
  token: xxx
flows:
- name: catchpoint-metrics
  query: |
    # no stream mentioned in the publish command, so the default metric template is
    # used for Prometheus metric creation
    data('catchpoint.counterfailedrequests').publish(prometheus_name="catchpoint_failures_total")
  prometheusMetricTemplates:
  # this template creates counters and uses the `prometheus_name` from the publish
  # command as Prometheus metfic name
  - name: "{{ .SignalFxLabels.prometheus_name }}"
    type: counter
    labels:
      probe: '{{ .SignalFxLabels.cp_testname }}'
